<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–·ç¶²å°æé¾ (å²è©©ç•«è³ªç‰ˆ) - RobotPlatform</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --bg-color: #f0f9ff; /* å¤©ç©ºè—æ·¡è‰² */
            --text-main: #334155;
        }
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            user-select: none;
        }
        
        header {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 1rem 0;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            position: relative;
            z-index: 10;
            backdrop-filter: blur(5px);
        }
        .back-btn {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            text-decoration: none;
            color: var(--primary-color);
            font-weight: bold;
            border: 1px solid var(--primary-color);
            padding: 5px 15px;
            border-radius: 6px;
            transition: all 0.2s;
        }
        .back-btn:hover { background: #eff6ff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }

        .game-container {
            margin-top: 5vh;
            text-align: center;
            position: relative;
        }
        
        /* ç•«å¸ƒå¤–æ¡†ç¾åŒ– */
        canvas {
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 100%); /* è—å¤©æ¼¸å±¤ */
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            max-width: 100%;
        }

        .score-board {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 1.4rem;
            font-weight: 800;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            width: 800px;
            margin: 0 auto 10px auto;
            max-width: 90vw;
            text-shadow: 1px 1px 0 #fff;
        }

        .controls-hint {
            margin-top: 20px;
            color: #64748b;
            font-size: 0.9rem;
        }

        #game-over {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 2px solid #334155;
        }
        #game-over h2 {
            margin: 0 0 10px 0;
            color: #ef4444;
            font-size: 2rem;
            text-transform: uppercase;
        }
        .restart-icon {
            font-size: 3rem;
            cursor: pointer;
            transition: transform 0.2s;
            display: inline-block;
        }
        .restart-icon:hover { transform: rotate(180deg) scale(1.1); }
        
        #power-bar-container {
            width: 100%;
            height: 8px;
            background: rgba(0,0,0,0.1);
            margin-top: 8px;
            border-radius: 4px;
            overflow: hidden;
            display: none; 
        }
        #power-bar {
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, #f59e0b, #ef4444);
            box-shadow: 0 0 10px #f59e0b;
            transition: width 0.1s linear;
        }
    </style>
</head>
<body>

    <header>
        <a href="/" class="back-btn">â† å›é¦–é </a>
        <h2 style="margin:0;">ğŸ¦– æ–·ç¶²å°æé¾ <span style="font-size:0.6em; background:#ef4444; color:white; padding:2px 8px; border-radius:10px; vertical-align:middle;">å²è©©ç‰ˆ</span></h2>
    </header>

    <div class="game-container">
        <div class="score-board">
            <span style="color:#64748b">HI <span id="high-score">00000</span></span>
            <span id="current-score" style="color:#334155">00000</span>
        </div>
        
        <div style="position: relative; width: 800px; max-width: 100%; margin: 0 auto;">
            <canvas id="gameCanvas" width="800" height="300"></canvas>
            
            <div id="game-over">
                <h2>Game Over</h2>
                <div class="restart-icon" onclick="resetGame()">â†»</div>
            </div>
            
            <div id="power-bar-container">
                <div id="power-bar"></div>
            </div>
        </div>

        <div class="controls-hint">
            [é›»è…¦] ç©ºç™½éµæˆ– â†‘ è·³èº<br>
            [æ‰‹æ©Ÿ] é»æ“Šç•«é¢è·³èº<br>
            <span style="color:#ef4444; font-weight:bold;">â˜… åƒåˆ°æ˜Ÿæ˜Ÿé–‹å•Ÿæœ«æ—¥æ¨åœŸæ©Ÿæ¨¡å¼ï¼</span>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('current-score');
        const highScoreEl = document.getElementById('high-score');
        const gameOverEl = document.getElementById('game-over');
        const powerBarContainer = document.getElementById('power-bar-container');
        const powerBar = document.getElementById('power-bar');

        let gameSpeed = 5;
        let score = 0;
        let isGameOver = false;
        let animationId;
        let frame = 0;
        
        // ç•«é¢éœ‡å‹•è®Šæ•¸
        let shakeDuration = 0;
        
        let highScore = localStorage.getItem('dinoHighScore') || 0;
        highScoreEl.innerText = pad(highScore, 5);

        // --- éŠæˆ²ç‰©ä»¶ ---
        let clouds = []; // é›²æœµ
        let stars = [];
        let particles = []; 
        let meteors = []; 
        let obstacles = [];

        // ç„¡æ•µè¨­å®š
        let isInvincible = false;
        let invincibleTimer = 0;
        const INVINCIBLE_DURATION = 900; // 15ç§’
        const BUFFER_TIME = 300; 

        // åœ°é¢é«˜åº¦
        const GROUND_Y = 250;

        const dino = {
            x: 50,
            y: GROUND_Y - 44, // èª¿æ•´ä»¥ç¬¦åˆç¹ªåœ–é«˜åº¦
            w: 44,
            h: 44,
            dy: 0,
            jumpPower: -12, 
            gravity: 0.5,  
            grounded: true,
            legFrame: 0 // è·‘æ­¥å‹•ç•«å¹€
        };

        function pad(n, width) {
            n = n + '';
            return n.length >= width ? n : new Array(width - n.length + 1).join('0') + n;
        }

        // --- ç¹ªåœ–å‡½æ•¸å€ (è®“ç•«é¢ç²¾ç·»çš„é—œéµ) ---

        // ç•«é›²æœµ
        function drawCloud(x, y, scale) {
            ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
            ctx.beginPath();
            ctx.arc(x, y, 20 * scale, 0, Math.PI * 2);
            ctx.arc(x + 15 * scale, y - 10 * scale, 25 * scale, 0, Math.PI * 2);
            ctx.arc(x + 35 * scale, y, 20 * scale, 0, Math.PI * 2);
            ctx.fill();
        }

        // ç•«ç²¾ç·»æé¾ (éæ–¹å¡Š)
        function drawDinoSprite(x, y, w, h, color, isRun) {
            ctx.fillStyle = color;
            
            // èº«é«” (æ©¢åœ“+çŸ©å½¢)
            ctx.beginPath();
            ctx.ellipse(x + w/2, y + h/2 + 5, w/2 - 5, h/3, 0, 0, Math.PI * 2);
            ctx.fill();

            // é ­éƒ¨
            ctx.fillRect(x + w/2, y, w/2, h/2.5);
            // é¼»å­å‡¸èµ·
            ctx.fillRect(x + w - 5, y, 5, h/4);

            // å°¾å·´
            ctx.beginPath();
            ctx.moveTo(x + 10, y + h/2);
            ctx.lineTo(x - 5, y + h/2 + 5);
            ctx.lineTo(x + 10, y + h - 10);
            ctx.fill();

            // çœ¼ç› (ç™½è‰²åº• + é»‘è‰²ç å­)
            ctx.fillStyle = "white";
            ctx.fillRect(x + w/1.5, y + 5, 8, 8);
            ctx.fillStyle = "black";
            ctx.fillRect(x + w/1.5 + 4, y + 7, 3, 3);

            // å˜´å·´
            ctx.fillStyle = color;
            ctx.fillRect(x + w/1.5, y + 22, 12, 4);

            // è…³ (è·‘æ­¥å‹•ç•«)
            ctx.strokeStyle = color;
            ctx.lineWidth = 4;
            ctx.beginPath();
            
            if (!dino.grounded) {
                // è·³èºå§¿å‹¢
                ctx.moveTo(x + w/2 - 5, y + h - 5);
                ctx.lineTo(x + w/2 - 5, y + h + 5); // å¾Œè…³ç¸®
                ctx.moveTo(x + w/2 + 5, y + h - 5);
                ctx.lineTo(x + w/2 + 10, y + h + 8); // å‰è…³ä¼¸
            } else {
                // è·‘æ­¥å§¿å‹¢ (åˆ‡æ›)
                if (Math.floor(frame / 6) % 2 === 0) {
                    ctx.moveTo(x + w/2 - 5, y + h - 5);
                    ctx.lineTo(x + w/2 - 5, y + h + 10); // å·¦è…³ä¸‹
                    ctx.moveTo(x + w/2 + 5, y + h - 5);
                    ctx.lineTo(x + w/2 + 10, y + h); // å³è…³ä¸Š
                } else {
                    ctx.moveTo(x + w/2 - 5, y + h - 5);
                    ctx.lineTo(x + w/2 - 10, y + h); // å·¦è…³ä¸Š
                    ctx.moveTo(x + w/2 + 5, y + h - 5);
                    ctx.lineTo(x + w/2 + 5, y + h + 10); // å³è…³ä¸‹
                }
            }
            ctx.stroke();
            
            // ç„¡æ•µå…‰ç’° (å¦‚æœæ˜¯ç„¡æ•µç‹€æ…‹)
            if (isInvincible) {
                ctx.strokeStyle = "#fcd34d"; // é‡‘è‰²å…‰é‚Š
                ctx.lineWidth = 2;
                ctx.strokeRect(x-2, y-2, w+4, h+14);
            }
        }

        // ç•«ç²¾ç·»ä»™äººæŒ
        function drawCactusSprite(obs) {
            ctx.fillStyle = "#15803d"; // æ·±ç¶ è‰²
            
            // ä¸»å¹¹
            let stemW = obs.w * 0.6;
            let stemX = obs.x + (obs.w - stemW) / 2;
            
            // åœ“é ‚
            ctx.beginPath();
            ctx.arc(stemX + stemW/2, obs.y, stemW/2, Math.PI, 0);
            ctx.fill();
            
            // èº«é«”
            ctx.fillRect(stemX, obs.y, stemW, obs.h);
            
            // åˆ†æ”¯ (å¦‚æœæœ‰é«˜åº¦å¤ é«˜)
            if (obs.h > 40) {
                // å·¦åˆ†æ”¯
                ctx.beginPath();
                ctx.moveTo(stemX, obs.y + 15);
                ctx.quadraticCurveTo(stemX - 10, obs.y + 15, stemX - 10, obs.y + 5);
                ctx.lineTo(stemX, obs.y + 15);
                ctx.fill();
                
                // å³åˆ†æ”¯
                ctx.beginPath();
                ctx.moveTo(stemX + stemW, obs.y + 10);
                ctx.quadraticCurveTo(stemX + stemW + 12, obs.y + 10, stemX + stemW + 12, obs.y - 5);
                ctx.lineTo(stemX + stemW, obs.y + 10);
                ctx.fill();
            }

            // åˆº (è£é£¾)
            ctx.fillStyle = "#a3e635"; // æ·ºç¶ è‰²åˆº
            ctx.fillRect(stemX + 2, obs.y + 10, 2, 2);
            ctx.fillRect(stemX + stemW - 4, obs.y + 25, 2, 2);
            ctx.fillRect(stemX + 5, obs.y + 35, 2, 2);
        }

        // ç•«ç«‹é«”æ˜Ÿæ˜Ÿ
        function drawStar(cx, cy, spikes, outerRadius, innerRadius) {
            // æ—‹è½‰å‹•ç•«
            let rot = Math.PI / 2 * 3 + (frame * 0.05); 
            let x = cx;
            let y = cy;
            let step = Math.PI / spikes;

            ctx.beginPath();
            ctx.moveTo(cx, cy - outerRadius);
            for (i = 0; i < spikes; i++) {
                x = cx + Math.cos(rot) * outerRadius;
                y = cy + Math.sin(rot) * outerRadius;
                ctx.lineTo(x, y);
                rot += step;

                x = cx + Math.cos(rot) * innerRadius;
                y = cy + Math.sin(rot) * innerRadius;
                ctx.lineTo(x, y);
                rot += step;
            }
            ctx.lineTo(cx, cy - outerRadius);
            ctx.closePath();
            
            // æ¼¸å±¤å¡«å……
            let grd = ctx.createRadialGradient(cx, cy, innerRadius, cx, cy, outerRadius);
            grd.addColorStop(0, "#fef3c7");
            grd.addColorStop(1, "#f59e0b");
            ctx.fillStyle = grd;
            ctx.fill();
            
            ctx.strokeStyle = "#fff";
            ctx.lineWidth = 1;
            ctx.stroke();
            
            // å…‰æšˆ
            ctx.shadowColor = "#fbbf24";
            ctx.shadowBlur = 15;
            ctx.stroke();
            ctx.shadowBlur = 0; 
        }

        // ç•«éš•çŸ³ (ç«çƒ)
        function drawMeteor(m) {
            // å°¾å·´ (å¤šå±¤æ¬¡)
            let grad = ctx.createLinearGradient(m.x, m.y, m.x + 40, m.y - 40);
            grad.addColorStop(0, "rgba(255, 69, 0, 1)");
            grad.addColorStop(1, "rgba(255, 69, 0, 0)");
            
            ctx.beginPath();
            ctx.moveTo(m.x, m.y);
            ctx.lineTo(m.x + m.r, m.y - m.r);
            ctx.lineTo(m.x + 40, m.y - 40);
            ctx.lineTo(m.x - m.r, m.y + m.r);
            ctx.fillStyle = grad;
            ctx.fill();

            // æ ¸å¿ƒ
            ctx.beginPath();
            ctx.arc(m.x, m.y, m.r, 0, Math.PI * 2);
            ctx.fillStyle = '#ea580c'; 
            ctx.fill();
            ctx.beginPath();
            ctx.arc(m.x - 2, m.y - 2, m.r * 0.6, 0, Math.PI * 2);
            ctx.fillStyle = '#fbbf24'; 
            ctx.fill();
        }

        // ç•«åœ°é¢
        function drawGround() {
            ctx.beginPath();
            ctx.moveTo(0, GROUND_Y);
            ctx.lineTo(canvas.width, GROUND_Y);
            ctx.strokeStyle = "#94a3b8";
            ctx.lineWidth = 2;
            ctx.stroke();

            // åœ°é¢ç´‹ç† (ç§»å‹•)
            ctx.fillStyle = "#cbd5e1";
            let offset = (frame * gameSpeed) % 50;
            for(let i=0; i<canvas.width + 50; i+=50) {
                if (i % 100 === 0) ctx.fillRect(i - offset, GROUND_Y + 5, 10, 3);
                else ctx.fillRect(i - offset + 20, GROUND_Y + 12, 6, 3);
            }
        }

        // éœ‡å‹•ç•«é¢
        function screenShake() {
            if (shakeDuration > 0) {
                let dx = (Math.random() - 0.5) * 10;
                let dy = (Math.random() - 0.5) * 10;
                ctx.translate(dx, dy);
                shakeDuration--;
            }
        }

        // çˆ†ç‚¸ç‰¹æ•ˆ
        function createExplosion(x, y, color='#535353') {
            shakeDuration = 5; // è§¸ç™¼éœ‡å‹•
            for (let i = 0; i < 20; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 15, 
                    vy: (Math.random() - 0.5) * 15,
                    life: 40, 
                    color: color,
                    size: Math.random() * 5 + 2
                });
            }
        }

        function update() {
            if (isGameOver) return;

            animationId = requestAnimationFrame(update);
            ctx.save(); // å„²å­˜ç•«å¸ƒç‹€æ…‹ (ç‚ºäº†éœ‡å‹•å¾©åŸ)
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            frame++;

            // æ‡‰ç”¨éœ‡å‹•
            screenShake();

            // --- 0. èƒŒæ™¯å±¤ ---
            // ç”Ÿæˆé›²
            if (Math.random() < 0.005) {
                clouds.push({x: canvas.width, y: Math.random() * 100 + 20, scale: Math.random() * 0.5 + 0.5});
            }
            // ç•«é›²
            for (let i = clouds.length - 1; i >= 0; i--) {
                let c = clouds[i];
                c.x -= gameSpeed * 0.2; // é›²å‹•å¾—æ…¢
                drawCloud(c.x, c.y, c.scale);
                if (c.x < -100) clouds.splice(i, 1);
            }

            drawGround();

            // --- 1. ç„¡æ•µè¨ˆæ™‚ ---
            if (isInvincible) {
                invincibleTimer--;
                let percent = (invincibleTimer / INVINCIBLE_DURATION) * 100;
                powerBar.style.width = percent + '%';

                if (invincibleTimer > BUFFER_TIME) {
                    if (frame % 5 === 0) {
                        meteors.push({
                            x: Math.random() * canvas.width + 100, 
                            y: -50,
                            vx: -6 - Math.random() * 5, 
                            vy: 8 + Math.random() * 5,  
                            r: 5 + Math.random() * 8   
                        });
                    }
                }
                if (invincibleTimer <= 0) {
                    isInvincible = false;
                    powerBarContainer.style.display = 'none';
                    meteors = [];
                }
            }

            // --- 2. æé¾ç‰©ç† ---
            if (!dino.grounded) {
                dino.dy += dino.gravity;
                dino.y += dino.dy;
            }

            // åœ°é¢ç¢°æ’
            if (dino.y >= GROUND_Y - dino.h) {
                dino.y = GROUND_Y - dino.h;
                dino.dy = 0;
                dino.grounded = true;
            }

            // æ±ºå®šæé¾é¡è‰²èˆ‡é–ƒçˆ
            let dinoColor = '#334155'; // é è¨­æ·±ç°
            if (isInvincible) {
                if (invincibleTimer < BUFFER_TIME && Math.floor(frame / 5) % 2 === 0) {
                    ctx.globalAlpha = 0.5;
                }
                dinoColor = '#ef4444'; // ç„¡æ•µç´…
            }
            
            drawDinoSprite(dino.x, dino.y, dino.w, dino.h, dinoColor);
            ctx.globalAlpha = 1.0; // æ¢å¾©é€æ˜åº¦

            // --- 3. éš•çŸ³æ›´æ–° ---
            for (let i = meteors.length - 1; i >= 0; i--) {
                let m = meteors[i];
                m.x += m.vx;
                m.y += m.vy;
                drawMeteor(m);

                if (m.y > GROUND_Y) {
                    createExplosion(m.x, GROUND_Y, '#f97316');
                    meteors.splice(i, 1);
                    continue;
                }

                for (let j = obstacles.length - 1; j >= 0; j--) {
                    let obs = obstacles[j];
                    let dist = Math.hypot(m.x - (obs.x + obs.w/2), m.y - (obs.y + obs.h/2));
                    if (dist < 40) {
                        createExplosion(obs.x + obs.w/2, obs.y + obs.h/2, '#15803d');
                        obstacles.splice(j, 1);
                        meteors.splice(i, 1);
                        score += 30;
                        break;
                    }
                }
            }

            // --- 4. ç²’å­æ•ˆæœ ---
            for (let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life--;
                ctx.globalAlpha = p.life / 40;
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size || 3, 0, Math.PI*2);
                ctx.fill();
                ctx.globalAlpha = 1.0;
                if (p.life <= 0) particles.splice(i, 1);
            }

            // --- 5. æ˜Ÿæ˜Ÿç”Ÿæˆ ---
            if (Math.random() < 0.005 && stars.length < 1 && !isInvincible) {
                stars.push({
                    x: canvas.width,
                    y: GROUND_Y - 80 - Math.random() * 60, // é«˜åº¦æµ®å‹•
                    r: 15 
                });
            }

            for (let i = stars.length - 1; i >= 0; i--) {
                let star = stars[i];
                star.x -= gameSpeed;
                drawStar(star.x, star.y, 5, 15, 7);

                // åƒæ˜Ÿæ˜Ÿç¢°æ’
                if (
                    dino.x < star.x + 15 &&
                    dino.x + dino.w > star.x - 15 &&
                    dino.y < star.y + 15 &&
                    dino.y + dino.h > star.y - 15
                ) {
                    isInvincible = true;
                    invincibleTimer = INVINCIBLE_DURATION;
                    powerBarContainer.style.display = 'block';
                    stars.splice(i, 1);
                    score += 100; 
                    // åƒåˆ°ç‰¹æ•ˆ
                    createExplosion(dino.x + dino.w/2, dino.y, '#fbbf24');
                }

                if (star.x < -20) stars.splice(i, 1);
            }

            // --- 6. éšœç¤™ç‰©ç”Ÿæˆ ---
            let minGap = 400 + (Math.random() * 200); 
            let spawnChance = 0.02;

            if (isInvincible && invincibleTimer > BUFFER_TIME) {
                minGap = 20; // çµ•å°ç‰†å£
                spawnChance = 1.0;
            }

            let lastObs = obstacles[obstacles.length - 1];
            
            if (!lastObs || (canvas.width - lastObs.x > minGap)) {
                if (Math.random() < spawnChance) { 
                    let height = Math.random() > 0.6 ? 40 : 60; 
                    obstacles.push({
                        x: canvas.width,
                        y: GROUND_Y - height,
                        w: 24, // ä»™äººæŒç¨å¾®å¯¬ä¸€é»
                        h: height
                    });
                }
            }

            // --- 7. ç§»å‹•èˆ‡ç¢°æ’ ---
            for (let i = 0; i < obstacles.length; i++) {
                let obs = obstacles[i];
                obs.x -= gameSpeed;
                drawCactusSprite(obs);

                // ç¢°æ’åˆ¤å®š (hitbox å¾®ç¸®)
                if (
                    dino.x + 10 < obs.x + obs.w &&
                    dino.x + dino.w - 10 > obs.x &&
                    dino.y + 10 < obs.y + obs.h &&
                    dino.y + dino.h > obs.y
                ) {
                    if (isInvincible) {
                        createExplosion(obs.x + obs.w/2, obs.y + obs.h/2, '#15803d');
                        obstacles.splice(i, 1); 
                        i--; 
                        score += 20; 
                        scoreEl.innerText = pad(score, 5);
                    } else {
                        gameOver();
                    }
                }

                if (obs && obs.x + obs.w < 0) {
                    obstacles.shift();
                    i--;
                    score++;
                    scoreEl.innerText = pad(score, 5);
                    if(score % 5 === 0 && gameSpeed < 13) gameSpeed += 0.2;
                }
            }
            
            ctx.restore(); // æ¢å¾©ç•«å¸ƒç‹€æ…‹
        }

        function jump() {
            if (dino.grounded && !isGameOver) {
                dino.dy = dino.jumpPower;
                dino.grounded = false;
            } else if (isGameOver) {
                resetGame();
            }
        }

        function gameOver() {
            isGameOver = true;
            gameOverEl.style.display = 'block';
            cancelAnimationFrame(animationId);
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('dinoHighScore', highScore);
                highScoreEl.innerText = pad(highScore, 5);
            }
        }

        function resetGame() {
            isGameOver = false;
            isInvincible = false;
            invincibleTimer = 0;
            powerBarContainer.style.display = 'none';
            gameOverEl.style.display = 'none';
            
            score = 0;
            scoreEl.innerText = pad(0, 5);
            gameSpeed = 5;
            obstacles = [];
            stars = [];
            particles = [];
            meteors = [];
            clouds = [];
            
            dino.y = GROUND_Y - dino.h;
            dino.dy = 0;
            
            update();
        }

        window.addEventListener('keydown', function (e) {
            if (e.code === 'Space' || e.code === 'ArrowUp') {
                e.preventDefault();
                jump();
            }
        });

        canvas.addEventListener('touchstart', function(e) {
            e.preventDefault();
            jump();
        });
        
        document.querySelector('.restart-icon').addEventListener('click', function(e){
            e.stopPropagation();
            resetGame();
        });

        update();
    </script>
</body>
</html>